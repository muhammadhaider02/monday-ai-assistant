{
  "name": "n8n-mcp-monday.com",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        16,
        -112
      ],
      "id": "bf38d1dc-a356-4d0c-ab6d-bb72018719dc",
      "name": "When chat message received",
      "webhookId": "={{$env.N8N_WEBHOOK_ID}}"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "={{$env.ANTHROPIC_MODEL}}",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {
          "maxTokensToSample": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        208,
        48
      ],
      "id": "5c65796c-2745-4060-8144-690e44e4d256",
      "name": "Anthropic Chat Model"
    },
    {
      "parameters": {
        "contextWindowLength": 1
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        416,
        144
      ],
      "id": "56d51b05-738a-4a49-8924-1766d7436a60",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a Claude Haiku-optimized MCP agent for Monday.com at {{$env.MONDAY_MCP_ENDPOINT}}. Execute commands on board ID {{$env.MONDAY_BOARD_ID}} in ONE `all_monday_api` call, outputting JSON: {\"action\": \"mcp_action\", \"params\": {\"query\": \"...\", \"variables\": \"...\"}}. Parse once, act instantly.\n\n**Metadata**:\n- For every command, call `get_board_info` to fetch column IDs/names (e.g., status, email) for board {{$env.MONDAY_BOARD_ID}} before executing the action.\n\n**Actions**:\n- Update item status, owner, due date (YYYY-MM-DD), email, notes, timeline.\n- Create/delete items.\n- Post updates.\n- Query items by status.\n\n**Rules**:\n- Use `get_board_info` column IDs (e.g., status=project_status, email=email_mktp3awp).\n- Email format: {\"email\": \"<email>\", \"text\": \"<email>\"}.\n- Task ID: \"final\"={{$env.MONDAY_FINAL_TASK_ID}}; others use name or clarify.\n- Batch actions into one `all_monday_api` mutation/query after metadata fetch.\n- If task name unknown, return: {\"action\": \"clarify\", \"message\": \"Which task?\"}.\n- On error, return: {\"action\": \"error\", \"message\": \"⚠️ <reason>\"}.\n- Only one extra API call (`get_board_info`).\n\n**Response**:\n- JSON: {\"action\": \"success\", \"message\": \"✅ <Action done>\"}, then {\"action\": \"prompt\", \"message\": \"What else?\"}.\n\n**Example**:\n- \"Change task 'final' email to {{$env.MONDAY_SAMPLE_EMAIL}}\" → {\"action\": \"mcp_action\", \"params\": {\"query\": \"mutation ($itemId: ID!, $columnValues: JSON!) { change_multiple_column_values(item_id: $itemId, board_id: {{$env.MONDAY_BOARD_ID}}, column_values: $columnValues) { id } }\", \"variables\": \"{\\\"itemId\\\": \\\"{{$env.MONDAY_FINAL_TASK_ID}}\\\", \\\"columnValues\\\": \\\"{\\\\\\\"email_mktp3awp\\\\\\\": {\\\\\\\"email\\\\\\\": \\\\\\\"{{$env.MONDAY_SAMPLE_EMAIL}}\\\\\\\", \\\\\\\"text\\\\\\\": \\\\\\\"{{$env.MONDAY_SAMPLE_EMAIL}}\\\\\\\"}}\\\"}\"}}."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        320,
        -128
      ],
      "id": "b0a96f3a-6170-4a7a-b589-d2cb570318b7",
      "name": "Monday Assistant"
    },
    {
      "parameters": {
        "endpointUrl": "={{$env.MONDAY_MCP_ENDPOINT}}",
        "authentication": "bearerAuth"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.1,
      "position": [
        608,
        64
      ],
      "id": "367b80fa-2f30-485a-8a7a-d4037710e099",
      "name": "Monday MCP Client"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Monday Assistant",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Monday Assistant",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Monday Assistant",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Monday MCP Client": {
      "ai_tool": [
        [
          {
            "node": "Monday Assistant",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "39f14666-131f-4dab-b8fc-4cdc836cc9f7",
  "meta": {
    "instanceId": "10b48a8c26d5f70065f19a737a8a6d6cba849f207f9974e391445a44c7686553"
  },
  "id": "GKqbHm4qptDtukwE",
  "tags": []
}